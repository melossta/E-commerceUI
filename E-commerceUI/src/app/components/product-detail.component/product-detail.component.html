<!-- <button mat-raised-button color="primary" (click)="goToProductList()">Back</button>
<mat-card *ngIf="product" style="margin: 24px;">
  <mat-card-title>{{ product.name }}</mat-card-title>
  <mat-card-subtitle>{{ product.price | currency }}</mat-card-subtitle>
  <mat-card-content>
    <p>{{ product.description }}</p>
  </mat-card-content>

  <div style="margin-top: 16px;">
    <mat-form-field appearance="fill">
      <mat-label>Quantity</mat-label>
      <input matInput type="number" [(ngModel)]="quantity" min="1">
    </mat-form-field>
  </div>

  <div style="margin-top: 16px;">
    <mat-form-field appearance="fill" style="width: 100%;">
      <mat-label>Select Shipping Address</mat-label>
      <mat-select [(ngModel)]="selectedShippingId">
        <mat-option *ngFor="let address of shippingDetails" [value]="address.shippingDetailsId">
          {{ address.address }}, {{ address.city }}, {{ address.country }}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>

  <mat-card-actions>
    <button mat-raised-button color="accent" [disabled]="!selectedShippingId || isLoading" (click)="placeSingleOrder()">
      {{ isLoading ? 'Placing...' : 'Order Now' }}
    </button>
    <button mat-raised-button color="primary" (click)="addToCart()">Add to Cart</button>
  </mat-card-actions>
</mat-card> -->


<!-- <button mat-raised-button color="primary" (click)="goToProductList()">Back</button>

<mat-card *ngIf="product" style="margin: 24px; display: flex; gap: 24px;">

 
  <div style="flex: 1; max-width: 300px;">
    <img
      *ngIf="product.imageUrl; else noImage"
      [src]="product.imageUrl"
      alt="{{ product.name }}"
      style="width: 100%; border-radius: 4px; object-fit: contain;"
    />
    <ng-template #noImage>
      <div style="width: 100%; height: 300px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
        No Image Available
      </div>
    </ng-template>
  </div>

  
  <div style="flex: 2; display: flex; flex-direction: column;">

    <mat-card-title>{{ product.name }}</mat-card-title>
    <mat-card-subtitle>{{ product.price | currency }}</mat-card-subtitle>

    <mat-card-content style="margin-top: 16px;">
      <p>{{ product.description }}</p>
    </mat-card-content>

    <div style="margin-top: 16px;">
      <mat-form-field appearance="fill">
        <mat-label>Quantity</mat-label>
        <input matInput type="number" [(ngModel)]="singleOrder.quantity" min="1" />
      </mat-form-field>
    </div>

    <div style="margin-top: 16px;">
      <mat-form-field appearance="fill" style="width: 100%;">
        <mat-label>Select Shipping Address</mat-label>
        <mat-select [(ngModel)]="selectedShippingId">
          <mat-option *ngFor="let address of shippingDetails" [value]="address.shippingDetailsId">
            {{ address.address }}, {{ address.city }}, {{ address.country }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-card-actions style="margin-top: auto;">
      <button
        mat-raised-button
        color="accent"
        [disabled]="!selectedShippingId || isLoading"
        (click)="placeSingleOrder()"
      >
        {{ isLoading ? 'Placing...' : 'Order Now' }}
      </button>
      <button mat-raised-button color="primary" (click)="addToCart()">
        Add to Cart
      </button>
    </mat-card-actions>

  </div>
</mat-card> -->

<mat-card *ngIf="product" style="margin: 24px; display: flex; flex-direction: row; gap: 24px; align-items: flex-start;">

  <!-- <div style="flex: 0 0 300px; max-width: 300px;">
    <img
      *ngIf="product.imageUrl; else noImage"
      [src]="product.imageUrl"
      alt="{{ product.name }}"
      style="width: 100%; border-radius: 4px; object-fit: contain;"
    />
    <ng-template #noImage>
      <div style="width: 100%; height: 300px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
        No Image Available
      </div>
    </ng-template>
  </div> -->

  <!-- Left side: Product Images -->
<div style="flex: 0 0 500px; max-width: 500px;">
  <ng-container *ngIf="product.productImages && product.productImages.length > 0; else noImage">

    <!-- Display the selected image -->
    <!-- Main image container with fixed height and non-moving layout -->
<div style="width: 100%; height: 400px; position: relative; background-color: #f9f9f9; border-radius: 4px; display: flex; align-items: center; justify-content: center;">
  <img
    [src]="selectedImageUrl || getPrimaryImageUrl(product.productImages)"
    alt="{{ product.name }}"
    style="max-width: 100%; max-height: 100%; object-fit: contain;"
  />
</div>


    <!-- Thumbnails -->
    <div style="margin-top: 8px; display: flex; flex-wrap: wrap; gap: 8px;">
      <img
        *ngFor="let img of product.productImages"
        [src]="img.imageUrl"
        style="width: 60px; height: 60px; object-fit: cover; border-radius: 4px; border: 2px solid transparent; cursor: pointer;"
        [style.border-color]="selectedImageUrl === img.imageUrl ? '#4e54c8' : 'transparent'"
        (click)="selectedImageUrl = img.imageUrl"
        [alt]="product.name"
      />
    </div>

  </ng-container>

  <ng-template #noImage>
    <div style="width: 100%; height: 300px; background-color: #f0f0f0; display: flex; align-items: center; justify-content: center; color: #999; font-style: italic;">
      No Image Available
    </div>
  </ng-template>
</div>

  <!-- Right side: Product Details and Order Controls -->
  <div style="flex: 1; display: flex; flex-direction: column;">

    <mat-card-title>{{ product.name }}</mat-card-title>
    <mat-card-subtitle>{{ product.price | currency }}</mat-card-subtitle>

    <mat-card-content style="margin-top: 16px;">
      <p>{{ product.description }}</p>
    </mat-card-content>

    <div style="margin-top: 16px;">
      <mat-form-field appearance="fill">
        <mat-label>Quantity</mat-label>
        <input matInput type="number" [(ngModel)]="singleOrder.quantity" min="1" />
      </mat-form-field>
    </div>

    <div style="margin-top: 16px;">
      <mat-form-field appearance="fill" style="width: 100%;">
        <mat-label>Select Shipping Address</mat-label>
        <mat-select [(ngModel)]="selectedShippingId">
          <mat-option *ngFor="let address of shippingDetails" [value]="address.shippingDetailsId">
            {{ address.address }}, {{ address.city }}, {{ address.country }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <mat-card-actions style="margin-top: auto;">
      <button
        mat-raised-button
        color="accent"
        [disabled]="!selectedShippingId || isLoading"
        (click)="placeSingleOrder()"
      >
        {{ isLoading ? 'Placing...' : 'Order Now' }}
      </button>
      <button mat-raised-button color="primary" (click)="addToCart()">
        Add to Cart
      </button>
    </mat-card-actions>

  </div>
</mat-card>
